#!/usr/bin/env python2
# -*- coding: utf-8 -*-


"""
Created on 18/06/2018
Engineering Ingegneria Informatica spa
Big Data & Analytics Competency Center
@author: chiara accadia

Test of following REST SERVICE: 
                 
1- "api_t_33/parsing/lemmatizer/en"
2- 'api_t_33/parsing/keywords/supervised/en'
3- 'api_t_33/parsing/types'
4- 'api_t_33/parsing/features'
5- 'api_t_33/parsing/structure'
6- 'api_t_33/parsing/metrics'

"""

import requests
import json
import os
import time
from IPython import embed

def tester_app(endpoint, baseAddress, data):
	t = time.time()
	req = requests.post(os.path.join(baseAddress,endpoint), data=json.dumps(data))
	print("ELAPSED: " + str(time.time() - t))
	resp = req.json()
	return resp

#%%#########################################################
################ Input data ################################  
############################################################

#rest service address
baseAddress = "http://127.0.0.1:5007/" # LOCAL MN03 app


document_en =[ u"the girls went from Mars.", 
           u"He eats a lot of potatoes"]


#text = """For the purposes of works performance in the area with traffic flow, the continuous 8-hour closings of the railway line (principally from 715 am to 1515 pm 	each working day) shall be set up. Exceptionally, depending on the technology and the demands of the specific works performance, the closings of the railway line lasting 12/24/48/72 hours (principally on weekends from  Friday to Monday) shall be approved. Performance of works  in the area with traffic flow  is necessary only in railway line sections which cannot measure more than 5 kilometres, and it can be executed only in one such section at the time."""


text="""they feed, mate, give birth, suckle and raise their young at sea. So extreme is their adaptation to life underwater that they are unable to survive on land. Whales range in size from the 2.6 metres (8.5 ft) and 135 kilograms (298 lb) dwarf sperm whale to the 29.9 metres (98 ft) and 190 metric tons (210 short tons) blue whale, which is the largest creature that has ever lived. The sperm whale is the largest toothed predator on earth. Several species exhibit sexual dimorphism, in that the females are larger than males. Baleen whales have no teeth; instead they have plates of baleen, a fringe-like structure used to expel water while retaining the krill and plankton which they feed on. They use their throat pleats to expand the mouth to take in huge gulps of water. Balaenids have heads that can make up 40% of their body mass to take in water. Toothed whales, on the other hand, have conical teeth adapted to catching fish or squid. Baleen whales have a well developed sense of "smell", whereas toothed whales have well-developed hearing âˆ’ their hearing, that is adapted for both air and water, is so well developed that some can survive even if they are blind. Some species, such as sperm whales, are well adapted for diving to great depths to catch squid and other favoured prey.
Whales have evolved from land-living mammals. As such whales must breathe air regularly, although they can remain submerged under water for long periods of time. Some species such as the sperm whale are able to stay submerged for as much as 90 minutes.[1] They have blowholes (modified nostrils) located on top of their heads, through which air is taken in and expelled."""


print ('---------------------------')
print ('Text:')
print (text )


"""
print '---------------------------'
print 'dbpedia entity types'
list_of_entities =  [u'Koprivnica', u'Distances']
data = { 'listOfEntities': list_of_entities}
out = tester_app(endpoint='api_t_33/parsing/types',baseAddress=baseAddress, data=data)
print out
"""

"""
print ('---------------------------------------')
print "features:"
data = {'document': text}
out = tester_app(endpoint='api_t_33/parsing/features',baseAddress=baseAddress, data=data)
print out

"""

print ('---------------------------------------')
print ("structure:")
data = { 'document': text}
out = tester_app(endpoint='api_t_33/parsing/structure',baseAddress=baseAddress, data=data)
embed()
print (out)


"""
print '---------------------------------------'
print "metrics:"
out = tester_app(endpoint='api_t_33/parsing/metrics',baseAddress=baseAddress, data=data)
print out
"""

